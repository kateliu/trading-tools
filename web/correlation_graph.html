<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Ticker Correlation Graph</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<script src="https://d3js.org/d3.v7.min.js"></script>
<style>
    body { font-family: 'Segoe UI', sans-serif; margin: 0; background: #f5f5f5; }
    header { padding: 1rem 1.5rem; background: #1f2937; color: white; }
    #chart { width: 100%; height: calc(100vh - 140px); }
    svg { width: 100%; height: 100%; }
    .node circle { stroke: #1f2937; stroke-width: 1.5px; cursor: grab; }
    .node text { pointer-events: none; font-size: 13px; font-weight: 600; fill: #1f2937; }
    .link { stroke-opacity: 0.4; }
    .highlight-node circle { stroke: #111827; stroke-width: 3px; }
    .dimmed { opacity: 0.15; }
    .legend { margin-top: 0.75rem; display: flex; gap: 1.25rem; flex-wrap: wrap; font-size: 0.9rem; }
    .legend-item { display: flex; align-items: center; gap: 0.4rem; }
    .legend-swatch { width: 16px; height: 16px; border-radius: 4px; border: 1px solid rgba(17, 24, 39, 0.4); }
    .legend-swatch.positive { background: linear-gradient(90deg, #b7e4c7, #1b4332); }
    .legend-swatch.negative { background: #ff6b6b; opacity: 0.7; }
    footer { padding: 0.75rem 1.5rem; background: #e5e7eb; font-size: 0.9rem; }
</style>
</head>
<body>
<header>
    <h1>Ticker Correlation Graph</h1>
    <p>metric=log_return, edges shown where |corr| â‰¥ 0.50</p>
    <div class="legend">
        <span class="legend-item"><span class="legend-swatch positive"></span>Positive correlation (darker = stronger)</span>
        <span class="legend-item"><span class="legend-swatch negative"></span>Negative correlation</span>
    </div>
</header>
<div id="chart"></div>
<footer>Click a ticker to highlight its direct correlations. Drag nodes to reposition them.</footer>
<script>
const data = {"nodes": [{"id": "AAPL", "label": "AAPL"}, {"id": "ACHR", "label": "ACHR"}, {"id": "ADBE", "label": "ADBE"}, {"id": "AMD", "label": "AMD"}, {"id": "AMZN", "label": "AMZN"}, {"id": "APLD", "label": "APLD"}, {"id": "APP", "label": "APP"}, {"id": "ASAN", "label": "ASAN"}, {"id": "BBAI", "label": "BBAI"}, {"id": "BLSH", "label": "BLSH"}, {"id": "BMNR", "label": "BMNR"}, {"id": "BULL", "label": "BULL"}, {"id": "CEG", "label": "CEG"}, {"id": "CHYM", "label": "CHYM"}, {"id": "COIN", "label": "COIN"}, {"id": "CORZ", "label": "CORZ"}, {"id": "CRCL", "label": "CRCL"}, {"id": "CRM", "label": "CRM"}, {"id": "CRWV", "label": "CRWV"}, {"id": "DUOL", "label": "DUOL"}, {"id": "FIG", "label": "FIG"}, {"id": "FIGR", "label": "FIGR"}, {"id": "FOUR", "label": "FOUR"}, {"id": "GRAB", "label": "GRAB"}, {"id": "HIMS", "label": "HIMS"}, {"id": "HOOD", "label": "HOOD"}, {"id": "IRDM", "label": "IRDM"}, {"id": "KLAR", "label": "KLAR"}, {"id": "KTOS", "label": "KTOS"}, {"id": "LAC", "label": "LAC"}, {"id": "LEU", "label": "LEU"}, {"id": "MDB", "label": "MDB"}, {"id": "META", "label": "META"}, {"id": "MP", "label": "MP"}, {"id": "MSFT", "label": "MSFT"}, {"id": "MSTR", "label": "MSTR"}, {"id": "MU", "label": "MU"}, {"id": "NBIS", "label": "NBIS"}, {"id": "NOTE", "label": "NOTE"}, {"id": "NU", "label": "NU"}, {"id": "NVDA", "label": "NVDA"}, {"id": "NVO", "label": "NVO"}, {"id": "OKLO", "label": "OKLO"}, {"id": "OKTA", "label": "OKTA"}, {"id": "ONDS", "label": "ONDS"}, {"id": "ORCL", "label": "ORCL"}, {"id": "OSCR", "label": "OSCR"}, {"id": "PDD", "label": "PDD"}, {"id": "PINS", "label": "PINS"}, {"id": "PLTR", "label": "PLTR"}, {"id": "PONY", "label": "PONY"}, {"id": "PYPL", "label": "PYPL"}, {"id": "QBTS", "label": "QBTS"}, {"id": "RCAT", "label": "RCAT"}, {"id": "RGTI", "label": "RGTI"}, {"id": "SHOP", "label": "SHOP"}, {"id": "SMCI", "label": "SMCI"}, {"id": "SNAP", "label": "SNAP"}, {"id": "SOFI", "label": "SOFI"}, {"id": "SOXX", "label": "SOXX"}, {"id": "TEM", "label": "TEM"}, {"id": "TMQ", "label": "TMQ"}, {"id": "TSLA", "label": "TSLA"}, {"id": "TSM", "label": "TSM"}, {"id": "TTD", "label": "TTD"}, {"id": "U", "label": "U"}, {"id": "UNH", "label": "UNH"}, {"id": "UPST", "label": "UPST"}, {"id": "UUUU", "label": "UUUU"}, {"id": "VOO", "label": "VOO"}, {"id": "VRT", "label": "VRT"}, {"id": "VST", "label": "VST"}], "links": [{"source": "AAPL", "target": "APLD", "weight": 0.6254155799184842}, {"source": "AAPL", "target": "BULL", "weight": 0.5177102785113371}, {"source": "ACHR", "target": "AMD", "weight": 0.5408235951535132}, {"source": "ACHR", "target": "APP", "weight": -0.5139806634545218}, {"source": "ACHR", "target": "BMNR", "weight": 0.5374236424111818}, {"source": "ACHR", "target": "MSFT", "weight": 0.5320099517038456}, {"source": "ACHR", "target": "RCAT", "weight": 0.5354927809629917}, {"source": "ADBE", "target": "BLSH", "weight": 0.5848975967595972}, {"source": "ADBE", "target": "FOUR", "weight": 0.6523023182288823}, {"source": "ADBE", "target": "LAC", "weight": -0.5536418541717961}, {"source": "ADBE", "target": "OKTA", "weight": 0.5479031005236622}, {"source": "ADBE", "target": "PINS", "weight": 0.5061533826281444}, {"source": "ADBE", "target": "SNAP", "weight": 0.5625214994954292}, {"source": "AMD", "target": "APP", "weight": -0.7810104592305189}, {"source": "AMD", "target": "ASAN", "weight": 0.5132582752446243}, {"source": "AMD", "target": "FOUR", "weight": 0.5364552037561312}, {"source": "AMD", "target": "IRDM", "weight": 0.5324795020535693}, {"source": "AMZN", "target": "COIN", "weight": 0.566119435784129}, {"source": "AMZN", "target": "CRCL", "weight": 0.6590006391974838}, {"source": "AMZN", "target": "FIGR", "weight": 0.6424287953908053}, {"source": "AMZN", "target": "META", "weight": 0.5766985098424933}, {"source": "AMZN", "target": "U", "weight": 0.5268749579410981}, {"source": "APLD", "target": "CEG", "weight": 0.6407685917841527}, {"source": "APLD", "target": "CHYM", "weight": 0.6507092075893643}, {"source": "APLD", "target": "ORCL", "weight": 0.5911197186750342}, {"source": "APLD", "target": "SMCI", "weight": 0.5589930709384026}, {"source": "APLD", "target": "TSM", "weight": 0.5167658413500936}, {"source": "APLD", "target": "VRT", "weight": 0.560258051125728}, {"source": "APP", "target": "ASAN", "weight": -0.6635180276540458}, {"source": "APP", "target": "IRDM", "weight": -0.7126835854544183}, {"source": "APP", "target": "KLAR", "weight": -0.5527300099636041}, {"source": "APP", "target": "SOXX", "weight": -0.5891375696898883}, {"source": "APP", "target": "TSM", "weight": -0.5378723427616484}, {"source": "ASAN", "target": "BLSH", "weight": 0.5819940366800338}, {"source": "ASAN", "target": "CRM", "weight": 0.6143269531359982}, {"source": "ASAN", "target": "FIG", "weight": 0.6387725822943227}, {"source": "ASAN", "target": "IRDM", "weight": 0.7797349272937351}, {"source": "ASAN", "target": "KLAR", "weight": 0.5095707330505727}, {"source": "ASAN", "target": "SOXX", "weight": 0.7162423604511801}, {"source": "BBAI", "target": "TSM", "weight": 0.5114908770429879}, {"source": "BLSH", "target": "COIN", "weight": 0.5700173462018728}, {"source": "BLSH", "target": "CRCL", "weight": 0.6345964271721538}, {"source": "BLSH", "target": "MSTR", "weight": 0.5305992331360398}, {"source": "BLSH", "target": "OKTA", "weight": 0.5937063478738134}, {"source": "BLSH", "target": "SOXX", "weight": 0.6534999050109093}, {"source": "BMNR", "target": "COIN", "weight": 0.506394372579377}, {"source": "BMNR", "target": "FOUR", "weight": 0.7154970593161545}, {"source": "BMNR", "target": "GRAB", "weight": 0.5936618481633954}, {"source": "BMNR", "target": "META", "weight": 0.517851555294079}, {"source": "BMNR", "target": "MSTR", "weight": 0.6533255670463065}, {"source": "BULL", "target": "DUOL", "weight": 0.6679716960639642}, {"source": "CEG", "target": "CHYM", "weight": 0.5983976570306674}, {"source": "CEG", "target": "CRM", "weight": 0.54759668765335}, {"source": "CEG", "target": "MDB", "weight": 0.6859226798199453}, {"source": "CEG", "target": "NBIS", "weight": 0.5708865745936265}, {"source": "CEG", "target": "ORCL", "weight": 0.6672900960322222}, {"source": "CEG", "target": "SMCI", "weight": 0.5208018631235357}, {"source": "CEG", "target": "VOO", "weight": 0.6845517766197353}, {"source": "CEG", "target": "VRT", "weight": 0.6733979156713749}, {"source": "CEG", "target": "VST", "weight": 0.6474606413248118}, {"source": "CHYM", "target": "CRM", "weight": 0.6320006217142332}, {"source": "CHYM", "target": "FOUR", "weight": 0.5668676552300972}, {"source": "CHYM", "target": "KLAR", "weight": 0.5245078313556027}, {"source": "CHYM", "target": "NBIS", "weight": 0.6506920139175228}, {"source": "CHYM", "target": "NOTE", "weight": 0.6233548674210314}, {"source": "CHYM", "target": "OKLO", "weight": 0.5004363495088874}, {"source": "CHYM", "target": "ORCL", "weight": 0.6228871536879511}, {"source": "CHYM", "target": "RCAT", "weight": 0.5193448772923749}, {"source": "COIN", "target": "CRCL", "weight": 0.7764826769341271}, {"source": "COIN", "target": "HOOD", "weight": 0.5225067818999174}, {"source": "COIN", "target": "MSTR", "weight": 0.8660400621899681}, {"source": "COIN", "target": "MU", "weight": 0.5195809909954807}, {"source": "COIN", "target": "OKTA", "weight": 0.6023713101010953}, {"source": "COIN", "target": "SHOP", "weight": 0.6082767022735716}, {"source": "COIN", "target": "SOXX", "weight": 0.5396341341095674}, {"source": "CORZ", "target": "CRWV", "weight": 0.7145583033301597}, {"source": "CORZ", "target": "NVDA", "weight": 0.6036409337054589}, {"source": "CORZ", "target": "SOXX", "weight": 0.5739912583506616}, {"source": "CORZ", "target": "TMQ", "weight": -0.5202204296497304}, {"source": "CORZ", "target": "VOO", "weight": 0.5835313360475637}, {"source": "CORZ", "target": "VRT", "weight": 0.6938429331833017}, {"source": "CRCL", "target": "FIGR", "weight": 0.5861747636485282}, {"source": "CRCL", "target": "META", "weight": 0.6012995927890394}, {"source": "CRCL", "target": "MSTR", "weight": 0.5065853767176234}, {"source": "CRCL", "target": "OKTA", "weight": 0.6335914159220477}, {"source": "CRCL", "target": "U", "weight": 0.5736868605120105}, {"source": "CRM", "target": "PYPL", "weight": 0.5019695254439017}, {"source": "CRM", "target": "SHOP", "weight": 0.5403346721239224}, {"source": "CRM", "target": "SNAP", "weight": 0.5240127545007007}, {"source": "CRM", "target": "U", "weight": 0.576256306715366}, {"source": "CRWV", "target": "ORCL", "weight": 0.5765463895021855}, {"source": "CRWV", "target": "VRT", "weight": 0.6244436119930983}, {"source": "FIG", "target": "PYPL", "weight": 0.5138713241771798}, {"source": "FIG", "target": "SOFI", "weight": 0.5209104771496141}, {"source": "FIGR", "target": "GRAB", "weight": 0.618092773427486}, {"source": "FIGR", "target": "META", "weight": 0.6362244236409247}, {"source": "FIGR", "target": "SOFI", "weight": 0.6099366032870149}, {"source": "FIGR", "target": "UNH", "weight": -0.5159539785414552}, {"source": "FIGR", "target": "UPST", "weight": 0.5852708636824328}, {"source": "FOUR", "target": "LAC", "weight": -0.5688931929887117}, {"source": "GRAB", "target": "META", "weight": 0.5032709150173555}, {"source": "HIMS", "target": "LEU", "weight": 0.5260085305535424}, {"source": "HIMS", "target": "PLTR", "weight": 0.7201128368632334}, {"source": "HIMS", "target": "SOFI", "weight": 0.581235088044638}, {"source": "IRDM", "target": "KLAR", "weight": 0.6665663130215107}, {"source": "IRDM", "target": "SOXX", "weight": 0.7311779133485141}, {"source": "KLAR", "target": "SNAP", "weight": 0.5819015461529893}, {"source": "KLAR", "target": "SOXX", "weight": 0.5327625090504845}, {"source": "KLAR", "target": "UPST", "weight": 0.5824998654552191}, {"source": "KLAR", "target": "UUUU", "weight": 0.5441018396760245}, {"source": "KTOS", "target": "LAC", "weight": -0.5273407544155745}, {"source": "KTOS", "target": "NBIS", "weight": -0.5569413320395227}, {"source": "KTOS", "target": "UNH", "weight": -0.6510531518044419}, {"source": "LEU", "target": "MDB", "weight": 0.5747668070362996}, {"source": "LEU", "target": "MP", "weight": 0.6838077012142968}, {"source": "LEU", "target": "OKLO", "weight": 0.5719661991502285}, {"source": "LEU", "target": "OKTA", "weight": 0.6168186137846866}, {"source": "LEU", "target": "SOFI", "weight": 0.5317167081234299}, {"source": "MDB", "target": "OKLO", "weight": 0.5126769230171034}, {"source": "MDB", "target": "VOO", "weight": 0.5701236730241462}, {"source": "META", "target": "U", "weight": 0.6374449268990279}, {"source": "MSFT", "target": "TSLA", "weight": 0.6563373443121047}, {"source": "MSFT", "target": "VOO", "weight": 0.5203534570560832}, {"source": "MSTR", "target": "MU", "weight": 0.7264667559099697}, {"source": "MSTR", "target": "NVO", "weight": 0.6501303287814247}, {"source": "MSTR", "target": "OKTA", "weight": 0.5172382515043848}, {"source": "MSTR", "target": "SOXX", "weight": 0.6241643314337753}, {"source": "MSTR", "target": "TEM", "weight": 0.5017437245552012}, {"source": "MSTR", "target": "VOO", "weight": 0.503701092225795}, {"source": "MU", "target": "NVO", "weight": 0.7506546368305002}, {"source": "MU", "target": "SMCI", "weight": 0.711654596383795}, {"source": "MU", "target": "SOXX", "weight": 0.5790860244395423}, {"source": "MU", "target": "TEM", "weight": 0.5644775027300803}, {"source": "MU", "target": "TSM", "weight": 0.6388628705375201}, {"source": "MU", "target": "VRT", "weight": 0.5278930475649745}, {"source": "NBIS", "target": "UNH", "weight": 0.5470696755590836}, {"source": "NOTE", "target": "ORCL", "weight": 0.5582461273746104}, {"source": "NU", "target": "SMCI", "weight": -0.5220353759352353}, {"source": "NU", "target": "U", "weight": 0.515882601328687}, {"source": "NVDA", "target": "QBTS", "weight": -0.51953408446699}, {"source": "NVDA", "target": "VOO", "weight": 0.5179393085280812}, {"source": "NVDA", "target": "VRT", "weight": 0.681364235903712}, {"source": "NVO", "target": "SMCI", "weight": 0.5031089780809025}, {"source": "NVO", "target": "SOXX", "weight": 0.5053623220115789}, {"source": "NVO", "target": "TEM", "weight": 0.6065781522426924}, {"source": "NVO", "target": "UPST", "weight": 0.5257234677286851}, {"source": "OKLO", "target": "ORCL", "weight": 0.5848213687904552}, {"source": "OKLO", "target": "PONY", "weight": 0.718465207401837}, {"source": "OKLO", "target": "SOFI", "weight": 0.6159013787872764}, {"source": "OKLO", "target": "U", "weight": 0.5514423525068295}, {"source": "OKTA", "target": "ONDS", "weight": 0.5347472914621664}, {"source": "OKTA", "target": "SNAP", "weight": 0.5799871904647937}, {"source": "OKTA", "target": "SOXX", "weight": 0.5457564319562737}, {"source": "ONDS", "target": "RGTI", "weight": 0.562573957563223}, {"source": "ONDS", "target": "TSLA", "weight": -0.6191458085812995}, {"source": "ORCL", "target": "SHOP", "weight": 0.5366439112529992}, {"source": "ORCL", "target": "VOO", "weight": 0.6661538257553153}, {"source": "ORCL", "target": "VRT", "weight": 0.6586182693733474}, {"source": "OSCR", "target": "SHOP", "weight": 0.5509839220169506}, {"source": "PLTR", "target": "SOFI", "weight": 0.5115117579784918}, {"source": "PONY", "target": "U", "weight": 0.5240963445936264}, {"source": "PYPL", "target": "TTD", "weight": 0.5657178901323745}, {"source": "QBTS", "target": "RGTI", "weight": 0.8161521796928983}, {"source": "QBTS", "target": "UPST", "weight": 0.5866764128761652}, {"source": "RCAT", "target": "TTD", "weight": 0.5665541813443431}, {"source": "SHOP", "target": "VRT", "weight": 0.5371637046100178}, {"source": "SMCI", "target": "SOXX", "weight": 0.6064000670696668}, {"source": "SMCI", "target": "TEM", "weight": 0.5806015921878408}, {"source": "SMCI", "target": "TSM", "weight": 0.6340917646956564}, {"source": "SMCI", "target": "VRT", "weight": 0.6620341482992587}, {"source": "SOFI", "target": "U", "weight": 0.536719256845052}, {"source": "SOXX", "target": "TSM", "weight": 0.6397182348876476}, {"source": "SOXX", "target": "VOO", "weight": 0.5705855592513795}, {"source": "SOXX", "target": "VRT", "weight": 0.5757160659750158}, {"source": "TTD", "target": "UNH", "weight": 0.5561478555841038}, {"source": "U", "target": "UPST", "weight": 0.5081795254388527}, {"source": "U", "target": "UUUU", "weight": 0.5383539497406393}, {"source": "UPST", "target": "VST", "weight": 0.5383155927109432}, {"source": "VOO", "target": "VRT", "weight": 0.7210150175755992}, {"source": "VOO", "target": "VST", "weight": 0.6162594795053433}]};
const threshold = 0.50;
const width = document.getElementById('chart').clientWidth;
const height = document.getElementById('chart').clientHeight;

const svg = d3.select('#chart').append('svg')
    .attr('viewBox', '0 0 ' + width + ' ' + height)
    .call(d3.zoom().on('zoom', function(event) { svgGroup.attr('transform', event.transform); }));

const svgGroup = svg.append('g');

const strokeScale = d3.scaleLinear()
    .domain([threshold, 1])
    .range([0.4, 0.9]);
const colorScale = d3.scaleLinear()
    .domain([threshold, 1])
    .range(['#b7e4c7', '#1b4332']);

const link = svgGroup.selectAll('.link')
    .data(data.links)
    .enter()
    .append('line')
    .attr('class', function(d) { return 'link ' + (d.weight >= 0 ? 'positive' : 'negative'); })
    .attr('stroke-width', function(d) { return Math.max(1.5, Math.abs(d.weight) * 4); })
    .attr('stroke', function(d) {
        var magnitude = Math.abs(d.weight);
        return d.weight >= 0 ? colorScale(Math.min(magnitude, 1)) : '#ff6b6b';
    })
    .attr('stroke-opacity', function(d) {
        var magnitude = Math.abs(d.weight);
        return d.weight >= 0 ? strokeScale(Math.min(magnitude, 1)) : 0.6;
    });

const nodeGroup = svgGroup.selectAll('.node')
    .data(data.nodes)
    .enter()
    .append('g')
    .attr('class', 'node')
    .call(d3.drag()
        .on('start', dragstarted)
        .on('drag', dragged)
        .on('end', dragended));

nodeGroup.append('circle')
    .attr('r', 20)
    .attr('fill', '#60a5fa');

nodeGroup.append('text')
    .attr('text-anchor', 'middle')
    .attr('dy', '0.35em')
    .text(function(d) { return d.label; });

const simulation = d3.forceSimulation(data.nodes)
    .force('link', d3.forceLink(data.links).id(function(d) { return d.id; }).distance(160).strength(0.4))
    .force('charge', d3.forceManyBody().strength(-500))
    .force('center', d3.forceCenter(width / 2, height / 2))
    .on('tick', ticked);

const adjacency = new Map();
for (const node of data.nodes) { adjacency.set(node.id, new Set()); }
for (const edge of data.links) {
    adjacency.get(edge.source).add(edge.target);
    adjacency.get(edge.target).add(edge.source);
}

nodeGroup.on('click', function(event, node) { highlight(node.id); });
svg.on('click', function(event) {
    if (event.target.tagName === 'svg') highlight(null);
});

function highlight(selectedId) {
    if (!selectedId) {
        nodeGroup.classed('dimmed highlight-node', false);
        link.classed('dimmed', false);
        return;
    }
    const neighbors = adjacency.get(selectedId) || new Set();
    nodeGroup.classed('highlight-node', function(d) { return d.id === selectedId; })
        .classed('dimmed', function(d) { return d.id !== selectedId && !neighbors.has(d.id); });
    link.classed('dimmed', function(d) { return !(d.source.id === selectedId || d.target.id === selectedId); });
}

function ticked() {
    link
        .attr('x1', function(d) { return d.source.x; })
        .attr('y1', function(d) { return d.source.y; })
        .attr('x2', function(d) { return d.target.x; })
        .attr('y2', function(d) { return d.target.y; });

    nodeGroup.attr('transform', function(d) { return 'translate(' + d.x + ',' + d.y + ')'; });
}

function dragstarted(event, d) {
    if (!event.active) simulation.alphaTarget(0.3).restart();
    d.fx = d.x;
    d.fy = d.y;
}

function dragged(event, d) {
    d.fx = event.x;
    d.fy = event.y;
}

function dragended(event, d) {
    if (!event.active) simulation.alphaTarget(0);
    d.fx = null;
    d.fy = null;
}
</script>
</body>
</html>
